id: relationAlreadyExists
args:
  - name: childType
    type: GriEntityType
  - name: childId
    type: Binary
  - name: parentType
    type: GriEntityType
  - name: parentId
    type: Binary
x-erl-to_json: |
  to_json(?ERR_RELATION_ALREADY_EXISTS(ErrorCtx, ChType, ChId, ParType, ParId)) ->
      RelationToString = case {ChType, ParType} of
          {od_space, od_provider} -> <<"is already supported by">>;
          {_, _} -> <<"is already a member of">>
      end,
      #{
          <<"id">> => ?ERR_RELATION_ALREADY_EXISTS_ID,
          <<"ctx">> => od_error:ctx_to_json(ErrorCtx),
          <<"details">> => #{
              <<"childType">> => gri:serialize_type(ChType),
              <<"childId">> => ChId,
              <<"parentType">> => gri:serialize_type(ParType),
              <<"parentId">> => ParId
          },
          <<"description">> => od_error:format_description("Bad value: ~ts:~ts ~ts ~ts:~ts.", [
              gri:serialize_type(ChType), ChId,
              RelationToString,
              gri:serialize_type(ParType), ParId
          ])
      }.
description: null
http_code: 409
